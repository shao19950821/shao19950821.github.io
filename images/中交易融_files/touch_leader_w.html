<!DOCTYPE html>
<!-- saved from url=(0057)http://localhost:8080/touch/TOUCH001W/touch_leader_w.view -->
<html class="k-webkit k-webkit67"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Hand Application Platform</title>

<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="_csrf" content="70be9d40-491c-4c23-b285-2d8b65f17336">
<meta name="_csrf_header" content="X-CSRF-TOKEN">
<link href="http://localhost:8080/resources/upload/favicon.png" rel="shortcut icon">
<!--[if IE 8]>
<script src="/lib/polyfill/respond.min.js"></script>
<script src="/lib/polyfill/es5-shim.min.js"></script>
<![endif]-->
<script src="./jquery.min.js"></script>
<script src="./kendo.all.min.js"></script>
<link href="./bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="./font-awesome.min.css" rel="stylesheet" type="text/css">
<link href="./kendo.common-bootstrap.min(1).css" rel="stylesheet" type="text/css">
<link href="./kendo.bootstrap.min(1).css" rel="stylesheet" type="text/css">
<link href="./kendo.hap(1).css" rel="stylesheet" type="text/css">
<script src="./kendo.culture.zh-CN(1).js"></script>
<script src="./kendo.messages.zh-CN(1).js"></script>
<script src="./kendo.hap(2).js"></script>
<script src="./prompts"></script>
<script>
_basePath = '',_locale='zh_CN'; 
kendo.culture("zh-CN");
</script>
<link href="./font-awesome.min(1).css" rel="stylesheet" type="text/css">
<link href="./hlsWindow.css" rel="stylesheet" type="text/css">
<link href="./button.css" rel="stylesheet" type="text/css">
<link href="./hls-all.css" rel="stylesheet" type="text/css">
<link href="./hls-switch.css" rel="stylesheet" type="text/css">
<link href="./hlsToolBar.css" rel="stylesheet" type="text/css">
<link href="./hlsPannel.css" rel="stylesheet" type="text/css">
<link href="./hlsButton.css" rel="stylesheet" type="text/css">
<link href="./jquery.mloading.css" rel="stylesheet" type="text/css">
<link href="./hlsPage.css" rel="stylesheet" type="text/css">
<link href="./navigationBar.css" rel="stylesheet" type="text/css">
<link href="./hls-chart.css" rel="stylesheet" type="text/css">
<link href="./hls-font.css" rel="stylesheet" type="text/css">
<link href="./HlsCusNormalize.css" rel="stylesheet" type="text/css">
<link href="./hls-default.css" rel="stylesheet" type="text/css">

<script src="./bootstrap.min.js"></script>
<script src="./hls-all.js"></script>
<script src="./hls-field.js"></script>
<script src="./hlsWindow.js"></script>
<script src="./hlsToolBar.js"></script>
<script src="./hls-switch.js" type="text/javascript"></script>
<script src="./hls-chart.js" type="text/javascript"></script>
<script src="./hlsDynamicBox.js"></script>
<script src="./hlsDynamicBox(1).js"></script>
<script src="./jquery.mloading.js" type="text/javascript"></script>
<script src="./hls-mask.js" type="text/javascript"></script>
<script src="./hlsPage.js" type="text/javascript"></script>
<script src="./hlsDataSource.js" type="text/javascript"></script>
<script src="./kendo.editor.js"></script>
<script src="./navigationBar.js" type="text/javascript"></script>
<script src="./jquery.blockUI.js"></script>
<script src="./hls-format.js"></script>
<!--<link href="/resources/hls/hlsTheme/hls-theme-standard.css" id="hls-theme" rel="stylesheet" type="text/css"/>-->
<link href="./hls-theme-classic.css" rel="stylesheet" type="text/css">
<script src="./hls-default.js"></script>
<style>
    /*文本域、输入框字体颜色*/
    .k-dropzone .k-upload-status, .k-dropzone em, .k-other-month, .k-other-month .k-link, .k-slider .k-draghandle, .k-state-disabled, .k-state-disabled .k-button, .k-state-disabled .k-link, .k-tile-empty strong{
        color:#333 !important;
    }

    /*文本域高度*/
    textarea.k-textbox{
        min-height:100px !important;
    }

    /*只读文本域高度*/
    textarea.k-state-textarea{
        min-height:100px !important;
    }


    textarea{
        border:1px solid #ccc !important;
    }

    /*去掉input框的X*/
    ::-ms-clear{display: none;}
    ::-ms-reveal{display: none;}
</style><style type="text/css">.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}</style></head>
<body marginwidth="0" marginheight="0">
<div id="popWindow"></div><link rel="stylesheet" href="./beyond.min.css"><link type="text/css" rel="stylesheet" href="./block-task.css"><link type="text/css" rel="stylesheet" href="./block-notice.css"><link type="text/css" rel="stylesheet" href="./block-warning.css"><link type="text/css" rel="stylesheet" href="./block-user.css"><link type="text/css" rel="stylesheet" href="./block-pi.css"><link type="text/css" rel="stylesheet" href="./block-todo.css"><link type="text/css" rel="stylesheet" href="./hls-touch.css"><link type="text/css" rel="stylesheet" href="./block-con-status.css"><link type="text/css" rel="stylesheet" href="./block-con-overdue.css"><link rel="stylesheet" href="./hls-component.css"><link type="text/css" rel="stylesheet" href="./block-11.css"><link type="text/css" rel="stylesheet" href="./block-12.css"><script src="./jquery.sparkline.js"></script><script src="./sparkline-init.js"></script><script src="./jquery.easypiechart.js"></script><script type="text/javascript" src="./block-task.js"></script><script src="./easypiechart-init.js"></script><script src="./beyond.js"></script><script src="./block-message.js"></script><script src="./block-warning.js"></script><script src="./paging.js"></script><script type="text/javascript" src="./hls-component.js"></script><script type="text/javascript" src="./hls-component-grid.js"></script><script type="text/javascript" src="./hls-component-chart.js"></script><script type="text/javascript" src="./block-pi.js"></script><script type="text/javascript" src="./block-con-overdue.js"></script><script type="text/javascript" src="./block-task-list.js"></script><script type="text/javascript" src="./format-currency.js"></script><script src="./jquery.flot.js"></script><script type="text/javascript" src="./block-incept-con.js"></script><script src="./raphael-2.0.2.min.js"></script><script src="./morris.js"></script><style>
        .k-tabstrip-wrapper {
            border-radius: 5px;
        }
        body {
            padding: 0 !important;
        }

        #tabstrip-1, #tabstrip-2 {
            border: none;
            border-radius: 5px;
        }

        .k-tabstrip-items {
            border-bottom: none !important;
        }
        /*黄色*/
        .k-tabstrip-items li {
            height: 32px;
            width: 140px;
            /*border-bottom: 4px solid rgb(246, 181, 0) !important;*/
            border-top-left-radius: 5px !important;
            border-right: 1px solid #ccc !important;
            text-align: center;
            font-size: 12px;
        }
        .k-tabstrip-items li.k-state-active{
            /*border-top: 4px solid rgb(0,72,152);*/
            border-bottom: 4px solid rgb(0,72,152);
            border-top:none !important;
        }
        #hls-main .k-tabstrip .k-state-active{
            color: white;
        }
/*        .k-tabstrip-items .k-state-active {
            border-top-left-radius: 5px;
            border-top: 4px solid rgb(126, 50, 149);
            border-bottom: none !important;
        }*/

        #unitTable {
            height: 100% !important;
        }
    </style><script id="scriptA">
    Hls._template = function () {
        var element = typeof arguments[0] === 'boolean' && arguments[0] ? '<p></p>' : '<span></span>',
            args = arguments;

        return function (dataItem) {
            // 默认纵向, 如果第一个参数为true则是横向
            var $html = $('<div></div>'), i = 0;
            for (; i < args.length; i++) {
                if (typeof args[i] === 'string') {
                    $html.append($(element).html(dataItem[args[i]]));
                } else if (typeof args[i] === 'object') {
                    switch (args[i].format) {
                        case 'currency':
                            $html.append($(element).html(Hls.formatCurrency(dataItem[args[i].property])));
                            break;
                        case 'date':
                            $html.append($(element).html(Hls.formatDate(dataItem[args[i].property])));
                            break;
                        case 'number':
                            $html.append($(element).html(Number(dataItem[args[i].property] || 0)));
                            break;

                    }
                }
            }
            $html.children(':odd').css('color', 'rgb(170,170,170)');

            return $html.get(0).outerHTML;
        };
    }


    var Model = {
        todoList: {
            processNameTemplate:function (dataItem, index) {
                return '<div style="cursor: pointer;" onclick="Model.todoList._goToTask(\'' + dataItem.processName + '\',\'' + dataItem.startUserName + '\',' + dataItem.id + ',' + dataItem.processInstanceId + ')"><a>'+dataItem.projectName+'</a><div>'+dataItem.processName+'</div></div>'
           },
            disposeTemplate: function (dataItem, index) {
                return '<img onclick="Model.todoList._goToTask(\'' + dataItem.processName + '\',\'' + dataItem.startUserName + '\',' + dataItem.id + ',' + dataItem.processInstanceId + ')" style="width:15px;height:15px;cursor:pointer;" src="/resources/images/CONT/flowChart.png"/>';
            },
            creationDateTemplate: function (dataItem) {
                return Hls.formatDate(dataItem.createTime);
            },
            _goToTask: function (processName, startUserName, id, processInstanceId) {
                var dialog = $("#popWindow").kendoWindow({
                    actions: ["Close"],
                    width: 800,
                    height: 510,
                    title: processName + '-' + startUserName,
                    visible: false,
                    iframe: true,
                    modal: true,
                    close: function (e) {
                        //触发刷新
                        top.hls_main_link();
                    }
                }).data("kendoWindow");
                hlsWindow(dialog, 'FULL', '/wfl/task_detail.html?taskId=' + id + '&processInstanceId=' + processInstanceId);
                // window.top.openTab("PROCESS_TASK_"+taskId, rec.processName + '-' +　rec.startUserName, '/wfl/task_detail.html?taskId=' + taskId, true);

            }
        },
        process: {
            lastApproveActionTemplate: function (dataItem) {
                if (dataItem.lastApprover) {
                    var reuslt = dataItem.lastApprover;
                    if (dataItem.lastApproveAction) {
                        if (dataItem.lastApproveAction == 'APPROVED') {
                            return reuslt + "<span class='action_ok'>(同意)</span>"
                        } else if (dataItem.lastApproveAction == 'REJECTED') {
                            return reuslt + "<span class='action_dangerous'>(拒绝)</span>"
                        }
                    }
                    return reuslt;
                }
                return '';
            },
            approvedHistory: function (dataItem, rowIndex) {
                return '<img onclick="Model.process._approvedHistoryPop(' + dataItem.id + ',\'' + dataItem.processName + '\')" style="width:15px;height:15px;cursor:pointer;" src="/resources/images/CONT/detail.png"/>';
            },
            processNameTemplate:function (dataItem, rowIndex) {
                if(dataItem.projectNumber){
                    return '<div style="cursor: pointer;" onclick="Model.process._approvedHistoryPop(' + dataItem.id + ',\'' + (dataItem.processName || '') + '\')"><a>'+dataItem.projectNumber+'/'+dataItem.projectName+'</a><div>'+dataItem.processName+'</div></div>'
                }
                return '<div style="cursor: pointer;" onclick="Model.process._approvedHistoryPop(' + dataItem.id + ',\'' + (dataItem.processName || '') + '\')"><a>'+dataItem.projectName+'</a><div>'+dataItem.processName+'</div></div>'
            },
            _approvedHistoryPop: function (id, processName) {
                debugger
                var win = $("#popWindow").kendoWindow({
                    actions: ["Minimize", "Maximize", "Close"],
                    width: 1000,
                    height: 450,
                    content: '/wfl/process_instance_detail.html?processInstanceId=' + id,
                    iframe: true,
                    visible: false,
                    modal: true,
                    close: function () {
                        top.hls_main_link();
                    }
                }).data("kendoWindow");
                win.title(processName + "[" + id + "]");
                top.hlsWindow(win, 'FULL');


            },

            startTimeTemplate: function (dataItem) {
                return Hls.formatDate(dataItem.startTime);
            },
            endTimeTemplate: function (dataItem) {
                return Hap.formatDateTime(dataItem.endTime) || "<span style='color:green;'>正在运行</span>"
            }
        },
        initSize: function () {
            var iframe = Hls.getWindowObj('touch_leader_w');
            $(iframe).height($('.hls-main').height());
        }
    };

    $(function () {
        Model.initSize();
    });


    function myProcessParameterMap(options) {
        return {
            involvedUser: 'ADMIN',
            queryType: "involve",
            size: 5,
            start: 0,
            sort: 'startTime',
            order: 'desc'
        };
    }


    function todoTaskParameterMap(options) {
        return {
            size: 5,
            start: 0,
            sort: 'createTime',
            order: 'desc'
        };
    }


    //    function renderGrid(e) {
    //        console.log(e);
    //
    //        myProcessGrid = new  HlsRollTable();
    //        var options =  {
    //            pageSize:5
    //        };
    //        options.hidFeildsName = true;
    //        options.hlsDataSource = myProcessGridDataSource.data;
    //        myProcessGrid.dataSource = this;
    //        options.dataSource = this;
    //        options.gridSelector = "#myProcessGrid";
    //        options.pageControlSelector = "#myProcessGrid_grid_foot";
    //        options.nextImgEnablePath = "/resources/images/CSH/next.png";
    //        options.prevImgEnablePath = "/resources/images/CSH/lastCan.png";
    //        options.nextImgUnenablePath = "/resources/images/CSH/nextNot.png";
    //        options.prevImgUnenablePath = "/resources/images/CSH/last.png";
    //        myProcessGrid._init(options);
    //    }

    function leaseItemAmountTmp(dataItem){
        return Hls.formatCurrency((dataItem.leaseItemAmount/10000));
    }

    function statusTemplate(dateItem) {

        return !dateItem.status || dateItem.status==='审批中' ? dateItem.nodeStatus :dateItem.status;
    }


    function contractReceiptGridParameterMap(options) {
        return Hls.prepareQueryParameter({

        }, options);
    }

    function infoQueryClickEvent() {
        top.openTab('TOUCH002F', '合同应收款信息查询', _basePath + '/touch/TOUCH002F/contract_receipt_info_list_f.view', null, null, 'Y', 'NEW');
    }

    var colorMap = {
        'NOT': '',
        'PARTIAL': 'color:#fff;background:#ffcd55;cursor:pointer;',
        'FULL': 'color:#fff;background:#A0D469;cursor:pointer;'
    };
    function writeOffFlagDescTmp(dataItem) {
        return '<span onclick="openPopWindow(\''+ dataItem.writeOffFlag +'\',' +dataItem.cashflowId+ ')"  style="width:60px;height:20px;line-height:20px;border-radius:2px;display:inline-block;text-align:center;' + colorMap[dataItem.writeOffFlag] + '">'+dataItem.writeOffFlagDesc+'</span>';
    }
    function openPopWindow(writeOffFlag,cashflowId) {
        if(writeOffFlag != 'NOT'){
            var dialogs = $("#popWindow").kendoWindow({
                actions: ["Close"],
                width: 1000,
                height: 500,
                resizable: false,
                title: '',
                visible: false,
                iframe: true,
                modal: false,
                content: '/touch/TOUCH002F/contract_receipt_info_cf_write_off_record_b.view?cashflowId=' + cashflowId
            }).data("kendoWindow");
            hlsWindow(dialogs,"","",610);
        }
    }

    function formatDate(property) {
        return function (dataItem){
            return Hls.formatDate(dataItem[property]);
        }
    }

    function formatCurrency(property) {
        return function (dataItem){
            return Hls.formatCurrency(dataItem[property]);
        }
    }
    function  contractReceiptBpNameTemplate(dataItem) {
        return dataItem.bpName || '';
    }


    var billingColorMap = {
        'FCT':'cursor:pointer;background:#2ec3e8;color:#fff;',
        'NOT': '',
        'PARTIAL': 'color:#fff;background:#ff00ff;cursor:pointer;',
        'FULL': 'color:#fff;background:#A0D469;cursor:pointer;'
    };

    function billingStatusDescTmp(dataItem) {
        var content,mark,businessKey;
        if(dataItem.isLease === 'Y'){
            content = dataItem.billingStatusDesc;
            mark = dataItem.billingStatus;
            businessKey = dataItem.cashflowId;
        }else
        {
            content = '开票详情';
            mark = 'FCT';
            businessKey = dataItem.withdrawId;
        }
        return '<span onclick="openBillingWindow(\''+dataItem.isLease+'\',' +businessKey+ ')" style="width:60px;height:20px;line-height:20px;border-radius:2px;display:inline-block;text-align:center;' + billingColorMap[mark] + '">' + content + '</span>';
    }

    function openBillingWindow(isLease,businessKey) {

        var html = '/touch/TOUCH002F/contract_receipt_info_billing_status_b.view';
        if(isLease === 'Y') {
            html += '?cashflowId=' + businessKey;
        }else{
            html += '?withdrawId=' + businessKey;
        }

        var dialogs = $("#popWindow").kendoWindow({
            actions: ["Close"],
            width: 1000,
            height: 500,
            resizable: false,
            title: '销项发票记录',
            visible: false,
            iframe: true,
            modal: false,
            content: html,
        }).data("kendoWindow");
        hlsWindow(dialogs,"","",910);
    }




    
    </script><script>
    var todoTaskGridDataSource = new hlsDataSource();
    todoTaskGridDataSource.setting({"pageSize":"5","page":"1","transport":{"read":{"contentType":"application/json; charset=utf-8","dataType":"json","type":"POST","url":"/hlsCus/wfl/query/tasks"},"parameterMap":todoTaskParameterMap}});
    if(true != "") {
       todoTaskGridDataSource.read();
    }
</script><script>
    var myProcessGridDataSource = new hlsDataSource();
    myProcessGridDataSource.setting({"pageSize":"5","page":"1","transport":{"read":{"contentType":"application/json; charset=utf-8","dataType":"json","type":"POST","url":"/hlsCus/wfl/query/process-instances/my"},"parameterMap":myProcessParameterMap}});
    if(true != "") {
       myProcessGridDataSource.read();
    }
</script><script>
    var selectTableCol1 = new hlsDataSource();
    selectTableCol1.setting({"pageSize":"5","page":"1","autoFetch":"false","transport":{"read":{"contentType":"application/json; charset=utf-8","dataType":"json","type":"GET","url":"/hls/cus/index/group/unit/table?colNum=1"}}});
    if(true != "") {
       selectTableCol1.read();
    }
</script><script>
    var selectTableCol3 = new hlsDataSource();
    selectTableCol3.setting({"pageSize":"5","page":"1","autoFetch":"false","transport":{"read":{"contentType":"application/json; charset=utf-8","dataType":"json","type":"GET","url":"/hls/cus/index/group/unit/table?colNum=3"}}});
    if(true != "") {
       selectTableCol3.read();
    }
</script><script>
    var contractReceiptGridDataSource = new hlsDataSource();
    contractReceiptGridDataSource.setting({"pageSize":"5","page":"1","autoFetch":"true","transport":{"read":{"contentType":"application/json; charset=utf-8","dataType":"json","type":"POST","url":"/hls/cus/index/contract/receipt/query?isCurrentMonth=Y"},"parameterMap":contractReceiptGridParameterMap}});
    if(true != "") {
       contractReceiptGridDataSource.read();
    }
</script><div id="hls-main" class="hls-main" style="width:1170px;"><div class="hls-block-y4 hls-block-margin-top "><div class="hls-block-x3 hls-float-left"><div class="k-tabstrip-wrapper"><div id="tabstrip" style="background:white;border-radius: 5px;" data-role="tabstrip" tabindex="0" class="k-widget k-header k-tabstrip k-floatwrap k-tabstrip-top" role="tablist" aria-activedescendant="tabstrip_ts_active">
    <ul class="k-tabstrip-items k-reset"><li class="k-item k-state-default k-first k-tab-on-top k-state-active" role="tab" aria-controls="tabstrip-1" aria-selected="true" id="tabstrip_ts_active"><span class="k-loading k-complete"></span><span class="k-link">待办事项</span></li><li class="k-item k-state-default k-last" role="tab" aria-controls="tabstrip-2"><span class="k-loading k-complete"></span><span class="k-link">我参与的工作流</span></li></ul>
    <div class="k-content k-state-active" id="tabstrip-1" role="tabpanel" aria-expanded="true" style="display: block;">
<div class="hls-pagging-grid" style="height:310px; box-shadow:none; width:100%;overflow-y:hidden; overflow-x:hidden !important;">
    <div id="todoTaskGrid" class="grid-body"><table><tr><td style="text-align: left; width: 300px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;"><span>流程名称</span></td><td style="text-align: center; width: 140px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;"><span>金额(万元)</span></td><td style="text-align: left; width: 160px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;"><span>创建时间</span></td><td style="text-align: left; width: 80px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;"><span>申请人</span></td></tr></table></div>
    <div class="grid-foot" id="todoTaskGrid_grid_foot">
        <div class="page-btn" style="width: 100px">
            <img id="todoTaskGrid_foot_btn_prev" class="page-img-prev" src="./last.png">
            <span id="todoTaskGrid_foot_page_count" class="page-count">1/0</span>
            <img id="todoTaskGrid_foot_btn_next" class="page-img-next" src="./nextNot.png">
        </div>
        <span class="page-message" id="todoTaskGrid_foot_page_message">显示条目 1-0 共0</span>
    </div>
</div>
<div style="clear:both;"></div>
<script>
    todoTaskGridDataSource.fetch(function (datas) {
        todoTaskGrid = new  HlsRollTable();
        var options =  {"pageSize":"5","id":"todoTaskGrid","filterable":true,"columns":[{"attributes":{"style":"text-align:left;"},"field":"processName","headerAttributes":{"style":"text-align:left;"},"template":Model.todoList.processNameTemplate,"title":"流程名称","width":300,"filterable":true},{"attributes":{"style":"text-align:right;margin-left:-20px;"},"field":"leaseItemAmount","headerAttributes":{"style":"text-align:center;"},"template":leaseItemAmountTmp,"title":"金额(万元)","width":140,"filterable":true},{"attributes":{"style":"text-align:left;"},"headerAttributes":{"style":"text-align:left;"},"template":Model.todoList.creationDateTemplate,"title":"创建时间","width":160,"filterable":true},{"attributes":{"style":"text-align:left;"},"field":"startUserName","headerAttributes":{"style":"text-align:left"},"title":"申请人","width":80,"filterable":true}]}||{};
        options.hlsDataSource = datas;
        todoTaskGrid.dataSource = this;
        options.dataSource = this;
        options.gridSelector = "#todoTaskGrid";
        options.pageControlSelector = "#todoTaskGrid_grid_foot";
        options.nextImgEnablePath = "/resources/images/CSH/next.png";
        options.prevImgEnablePath = "/resources/images/CSH/lastCan.png";
        options.nextImgUnenablePath = "/resources/images/CSH/nextNot.png";
        options.prevImgUnenablePath = "/resources/images/CSH/last.png";
        todoTaskGrid._init(options);
    });









</script></div><div class="k-content" id="tabstrip-2" role="tabpanel" aria-hidden="true" aria-expanded="false">
<div class="hls-pagging-grid" style="height:310px;width:100%;box-shadow:none;overflow:hidden;">
    <div id="myProcessGrid" class="grid-body"><table><tr><td style="text-align: left; width: 320px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;"><span>流程名称</span></td><td style="text-align: center; width: 80px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;"><span>金额(万元)</span></td><td style="text-align: left; width: 80px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;"><span>创建时间</span></td><td style="text-align: left; width: 80px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;"><span>申请人</span></td><td style="text-align: left; width: 150px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;"><span>流程状态</span></td></tr><tr><td><div style="text-align: left; width: 320px;" class="hls-text-len-hidden"><div style="cursor: pointer;" onclick="Model.process._approvedHistoryPop(4250170,&#39;合同签约审批&#39;)"><a>CCCCIN18E0011-L-01/中交建测试6</a><div>合同签约审批</div></div></div></td><td><div style="text-align: right; margin-left: -20px; width: 80px;" class="hls-text-len-hidden">20.00</div></td><td><div style="text-align: left; width: 80px;" class="hls-text-len-hidden">2018-05-29</div></td><td><div style="text-align: left; width: 80px;" class="hls-text-len-hidden">zhouj</div></td><td><div style="text-align: left; width: 150px;" class="hls-text-len-hidden">已退回</div></td></tr><tr><td><div style="text-align: left; width: 320px;" class="hls-text-len-hidden"><div style="cursor: pointer;" onclick="Model.process._approvedHistoryPop(4185383,&#39;合同审批&#39;)"><a>CCCCFL18E0116-L-01/52222</a><div>合同审批</div></div></div></td><td><div style="text-align: right; margin-left: -20px; width: 80px;" class="hls-text-len-hidden">10.00</div></td><td><div style="text-align: left; width: 80px;" class="hls-text-len-hidden">2018-05-24</div></td><td><div style="text-align: left; width: 80px;" class="hls-text-len-hidden">于佳</div></td><td><div style="text-align: left; width: 150px;" class="hls-text-len-hidden">已退回</div></td></tr></table></div>
    <div class="grid-foot" id="myProcessGrid_grid_foot">
        <div class="page-btn" style="width: 100px">
            <img id="myProcessGrid_foot_btn_prev" class="page-img-prev" src="./last.png">
            <span id="myProcessGrid_foot_page_count" class="page-count">1/1</span>
            <img id="myProcessGrid_foot_btn_next" class="page-img-next" src="./nextNot.png">
        </div>
        <span class="page-message" id="myProcessGrid_foot_page_message">显示条目 1-2 共2</span>
    </div>
</div>
<div style="clear:both;"></div>
<script>
    myProcessGridDataSource.fetch(function (datas) {
        myProcessGrid = new  HlsRollTable();
        var options =  {"pageSize":"5","id":"myProcessGrid","filterable":true,"columns":[{"attributes":{"style":"text-align:left;"},"field":"processName","headerAttributes":{"style":"text-align:left;"},"template":Model.process.processNameTemplate,"title":"流程名称","width":320,"filterable":true},{"attributes":{"style":"text-align:right;margin-left:-20px;"},"field":"leaseItemAmount","headerAttributes":{"style":"text-align:center;"},"template":leaseItemAmountTmp,"title":"金额(万元)","width":80,"filterable":true},{"attributes":{"style":"text-align:left"},"headerAttributes":{"style":"text-align:left"},"template":Model.process.startTimeTemplate,"title":"创建时间","width":80,"filterable":true},{"attributes":{"style":"text-align:left;"},"field":"startUserName","headerAttributes":{"style":"text-align:left"},"title":"申请人","width":80,"filterable":true},{"attributes":{"style":"text-align:left;"},"field":"status","headerAttributes":{"style":"text-align:left"},"template":statusTemplate,"title":"流程状态","width":150,"filterable":true}]}||{};
        options.hlsDataSource = datas;
        myProcessGrid.dataSource = this;
        options.dataSource = this;
        options.gridSelector = "#myProcessGrid";
        options.pageControlSelector = "#myProcessGrid_grid_foot";
        options.nextImgEnablePath = "/resources/images/CSH/next.png";
        options.prevImgEnablePath = "/resources/images/CSH/lastCan.png";
        options.nextImgUnenablePath = "/resources/images/CSH/nextNot.png";
        options.prevImgUnenablePath = "/resources/images/CSH/last.png";
        myProcessGrid._init(options);
    });









</script></div>
</div></div>
<script>
$("#tabstrip").kendoTabStrip({"animation":false,"value":"待办事项"});</script></div><div class="hls-block-x1 hls-block-y4 hls-block-margin-left hls-float-left"><div class="hls-block-x1 hls-block-y2 row-body-right-area"><div id="right-area1-up" class="right-area1-up" style="background-color: #a0d468;padding-left:6px;"><span data-height="115px" data-spotradius="3" data-maxspotcolor="#fff" data-linecolor="#fff" data-composite="825326580,102659423,2804050716.97,363710000,24521918,96942813.75,0,0,0,0,0,0" data-barspacing="5px" data-fillcolor="false" data-minspotcolor="#fafafa" data-sparkline="compositebar" id="payment-span" data-barwidth="15px" data-barcolor="#b0dc81" data-linewidth="2" data-spotcolor="#fafafa" style="" data-highlightspotcolor="#fff" data-highlightlinecolor="#fff"><canvas width="235" height="115" style="display: inline-block; width: 235px; height: 115px; vertical-align: top;"></canvas></span></div><div class="right-area1-down"><div class="right-area-down-left"><div class="right-area-down1">本年放款金额</div><div id="year-payment-amount" class="right-area-down2" style="margin-left: 0;padding-left:10px;text-align: left;">4,217,211,451.72</div></div><div class="right-area-down-right"><div class="right-area-down1">本月放款金额</div><div id="month-payment-amount" class="right-area-down2" style="margin-left: 0;padding-left:10px;text-align: left;">0.00</div></div></div></div><div class="hls-block-x1 hls-block-y2 hls-block-margin-top row-body-right-area"><div id="right-area2-up" class="right-area1-up" style="background-color:#fb6e52;padding-left:6px"><span data-height="115px" data-spotradius="3" data-maxspotcolor="#fff" data-width="270px" data-linecolor="#fff" data-composite="215566403.8,48778969.08,330789970.91,81627209.67,36941067.60999999,22904.75,0,0,0,0,0,0" data-barspacing="5px" data-fillcolor="false" data-minspotcolor="#fafafa" data-sparkline="compositebar" id="recepipt-span" data-barwidth="15px" data-barcolor="#fb7d64" data-linewidth="2" data-spotcolor="#fafafa" data-highlightspotcolor="#fff" data-highlightlinecolor="#fff"><canvas width="235" height="115" style="display: inline-block; width: 235px; height: 115px; vertical-align: top;"></canvas></span></div><div class="right-area1-down"><div class="right-area-down-left"><div class="right-area-down1">本年回款金额</div><div id="year-receipt-amount" class="right-area-down2" style="margin-left: 0;padding-left:10px;text-align: left;">713,726,525.82</div></div><div class="right-area-down-right"><div class="right-area-down1">本月回款金额</div><div id="month-receipt-amount" class="right-area-down2" style="margin-left: 0;padding-left:10px;text-align: left;">0.00</div></div></div></div></div></div><script>
            function currentMonthNewSumLxTmp(dataItem){
                return dataItem['currentMonthNewSumLx'] || 0;
            }
            function currentMonthAmountSumLxTmp(dataItem){
                return Hls.formatCurrency(dataItem['currentMonthAmountSumLx'] ? (dataItem['currentMonthAmountSumLx']/10000) : 0);
            }
            function currentYearNewSumLxTmp(dataItem){
                return dataItem['currentYearNewSumLx'] || 0;
            }
            function currentYearAmountSumLxTmp(dataItem){
                return Hls.formatCurrency(dataItem['currentYearAmountSumLx'] ? (dataItem['currentYearAmountSumLx']/10000) : 0);
            }


            function currentMonthNewSumJdTmp(dataItem){
                return dataItem['currentMonthNewSumJd'] || 0;
            }
            function currentMonthAmountSumJdTmp(dataItem){
                return Hls.formatCurrency(dataItem['currentMonthAmountSumJd'] ? (dataItem['currentMonthAmountSumJd']/10000) : 0);
            }
            function currentYearNewSumJdTmp(dataItem){
                return dataItem['currentYearNewSumJd'] || 0;
            }
            function currentYearAmountSumJdTmp(dataItem){
                return Hls.formatCurrency(dataItem['currentYearAmountSumJd'] ? (dataItem['currentYearAmountSumJd']/10000) : 0);
            }
            function  forAdjustTemplate(dataItem) {
                return "";
            }

            function currentMonthNewSumHtTmp(dataItem){
                return dataItem['currentMonthNewSumHt'] || 0;
            }
            function currentMonthAmountSumHtTmp(dataItem){
                return Hls.formatCurrency(dataItem['currentMonthAmountSumHt'] ? (dataItem['currentMonthAmountSumHt']/10000) : 0);
            }
            function currentYearNewSumHtTmp(dataItem){
                return dataItem['currentYearNewSumHt'] || 0;
            }
            function currentYearAmountSumHtTmp(dataItem){
                return Hls.formatCurrency(dataItem['currentYearAmountSumHt'] ? (dataItem['currentYearAmountSumHt']/10000) : 0);
            }


            function currentMonthThrowAmountSumTmp(dataItem) {
                return Hls.formatCurrency(dataItem['currentMonthThrowAmountSum'] ? (dataItem['currentMonthThrowAmountSum'] / 10000) : 0);
            }


            function currentYearThrowAmountSumTmp(dataItem) {
                return Hls.formatCurrency(dataItem['currentYearThrowAmountSum'] ? (dataItem['currentYearThrowAmountSum'] / 10000) : 0);
            }

        </script><div class="k-tabstrip-wrapper"><div id="tabstrip2" style="background:white;border-radius: 5px;margin-top:25px;" data-role="tabstrip" tabindex="0" class="k-widget k-header k-tabstrip k-floatwrap k-tabstrip-top" role="tablist" aria-activedescendant="tabstrip2_ts_active">
    <ul class="k-tabstrip-items k-reset"><li class="k-item k-state-default k-first k-tab-on-top k-state-active" role="tab" aria-controls="tabstrip2-1" aria-selected="true" id="tabstrip2_ts_active"><span class="k-loading k-complete"></span><span class="k-link">项目</span></li><li class="k-item k-state-default k-last" role="tab" aria-controls="tabstrip2-2"><span class="k-loading k-complete"></span><span class="k-link">合同</span></li></ul>
    <div class="k-content k-state-active" id="tabstrip2-1" role="tabpanel" aria-expanded="true" style="display: block;">
<div class="hls-pagging-grid" style="height:100%;box-shadow:none; width:100%;overflow-y:hidden; overflow-x:hidden !important;">
    <div id="unitTable" class="grid-body"><table><tr><td style="text-align: center;width: 120px;font-weight:bold;"><span>部门</span></td><td style="text-align: center;width: 80px;font-weight:bold;" colspan="4"><span>项目立项</span></td><td style="text-align: center;width: 160px;font-weight:bold;" colspan="5"><span>尽调</span></td></tr><tr><td style="text-align: center; width: 120px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;"><span></span></td><td style="text-align: center; width: 100px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;"><span>本月新增</span></td><td style="text-align: center; width: 120px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;"><span>本月项目金额(万元)</span></td><td style="text-align: center; width: 100px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;"><span>本年合计</span></td><td style="text-align: center; width: 120px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;"><span>本年项目金额(万元)</span></td><td style="text-align: center; width: 80px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;"><span></span></td><td style="text-align: center; width: 100px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;"><span>本月新增</span></td><td style="text-align: center; width: 120px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;"><span>本月项目金额(万元)</span></td><td style="text-align: center; width: 100px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;"><span>本年合计</span></td><td style="text-align: center; width: 120px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;"><span>本年项目金额(万元)</span></td></tr><tr><td><div style="text-align: center; width: 120px;" class="hls-text-len-hidden">业务一部</div></td><td><div style="text-align: center; width: 100px;" class="hls-text-len-hidden">0</div></td><td><div style="text-align: right; width: 120px;" class="hls-text-len-hidden">0.00</div></td><td><div style="text-align: center; width: 100px;" class="hls-text-len-hidden">2</div></td><td><div style="text-align: right; margin-left: -20px; width: 120px;" class="hls-text-len-hidden">2,141.23</div></td><td><div style="text-align: right; width: 80px;" class="hls-text-len-hidden"></div></td><td><div style="text-align: center; width: 100px;" class="hls-text-len-hidden">0</div></td><td><div style="text-align: right; width: 120px;" class="hls-text-len-hidden">0.00</div></td><td><div style="text-align: center; width: 100px;" class="hls-text-len-hidden">6</div></td><td><div style="text-align: right; width: 120px;" class="hls-text-len-hidden">50,121.33</div></td></tr><tr><td><div style="text-align: center; width: 120px;" class="hls-text-len-hidden">业务二部</div></td><td><div style="text-align: center; width: 100px;" class="hls-text-len-hidden">0</div></td><td><div style="text-align: right; width: 120px;" class="hls-text-len-hidden">0.00</div></td><td><div style="text-align: center; width: 100px;" class="hls-text-len-hidden">29</div></td><td><div style="text-align: right; margin-left: -20px; width: 120px;" class="hls-text-len-hidden">263,217.16</div></td><td><div style="text-align: right; width: 80px;" class="hls-text-len-hidden"></div></td><td><div style="text-align: center; width: 100px;" class="hls-text-len-hidden">0</div></td><td><div style="text-align: right; width: 120px;" class="hls-text-len-hidden">0.00</div></td><td><div style="text-align: center; width: 100px;" class="hls-text-len-hidden">10</div></td><td><div style="text-align: right; width: 120px;" class="hls-text-len-hidden">29,750.45</div></td></tr><tr><td><div style="text-align: center; width: 120px;" class="hls-text-len-hidden">业务三部</div></td><td><div style="text-align: center; width: 100px;" class="hls-text-len-hidden">0</div></td><td><div style="text-align: right; width: 120px;" class="hls-text-len-hidden">0.00</div></td><td><div style="text-align: center; width: 100px;" class="hls-text-len-hidden">38</div></td><td><div style="text-align: right; margin-left: -20px; width: 120px;" class="hls-text-len-hidden">102,616,575.97</div></td><td><div style="text-align: right; width: 80px;" class="hls-text-len-hidden"></div></td><td><div style="text-align: center; width: 100px;" class="hls-text-len-hidden">0</div></td><td><div style="text-align: right; width: 120px;" class="hls-text-len-hidden">0.00</div></td><td><div style="text-align: center; width: 100px;" class="hls-text-len-hidden">9</div></td><td><div style="text-align: right; width: 120px;" class="hls-text-len-hidden">30,307.80</div></td></tr><tr><td><div style="text-align: center; width: 120px;" class="hls-text-len-hidden">业务四部</div></td><td><div style="text-align: center; width: 100px;" class="hls-text-len-hidden">0</div></td><td><div style="text-align: right; width: 120px;" class="hls-text-len-hidden">0.00</div></td><td><div style="text-align: center; width: 100px;" class="hls-text-len-hidden">43</div></td><td><div style="text-align: right; margin-left: -20px; width: 120px;" class="hls-text-len-hidden">421,428.52</div></td><td><div style="text-align: right; width: 80px;" class="hls-text-len-hidden"></div></td><td><div style="text-align: center; width: 100px;" class="hls-text-len-hidden">0</div></td><td><div style="text-align: right; width: 120px;" class="hls-text-len-hidden">0.00</div></td><td><div style="text-align: center; width: 100px;" class="hls-text-len-hidden">57</div></td><td><div style="text-align: right; width: 120px;" class="hls-text-len-hidden">359,280.93</div></td></tr><tr><td><div style="text-align: center; width: 120px;" class="hls-text-len-hidden">合计</div></td><td><div style="text-align: center; width: 100px;" class="hls-text-len-hidden">0</div></td><td><div style="text-align: right; width: 120px;" class="hls-text-len-hidden">0.00</div></td><td><div style="text-align: center; width: 100px;" class="hls-text-len-hidden">112</div></td><td><div style="text-align: right; margin-left: -20px; width: 120px;" class="hls-text-len-hidden">103,303,362.87</div></td><td><div style="text-align: right; width: 80px;" class="hls-text-len-hidden"></div></td><td><div style="text-align: center; width: 100px;" class="hls-text-len-hidden">0</div></td><td><div style="text-align: right; width: 120px;" class="hls-text-len-hidden">0.00</div></td><td><div style="text-align: center; width: 100px;" class="hls-text-len-hidden">82</div></td><td><div style="text-align: right; width: 120px;" class="hls-text-len-hidden">469,460.51</div></td></tr></table></div>
</div>
<div style="clear:both;"></div>
<script>
    selectTableCol1.fetch(function (datas) {
        unitTable = new  HlsRollTable();
        var options =  {"pageSize":"5","id":"unitTable","filterable":true,"columns":[{"attributes":{"style":"text-align:center;"},"field":"unitName","headerAttributes":{"style":"text-align:center;"},"width":120,"filterable":true},{"attributes":{"style":"text-align:center;"},"field":"currentMonthNewSumLx","headerAttributes":{"style":"text-align:center;"},"template":currentMonthNewSumLxTmp,"title":"本月新增","width":100,"filterable":true},{"attributes":{"style":"text-align:right;"},"field":"currentMonthAmountSumLx","headerAttributes":{"style":"text-align:center"},"template":currentMonthAmountSumLxTmp,"title":"本月项目金额(万元)","width":120,"filterable":true},{"attributes":{"style":"text-align:center;"},"field":"currentYearNewSumLx","headerAttributes":{"style":"text-align:center;"},"template":currentYearNewSumLxTmp,"title":"本年合计","width":100,"filterable":true},{"attributes":{"style":"text-align:right;margin-left:-20px;"},"field":"currentYearAmountSumLx","headerAttributes":{"style":"text-align:center"},"template":currentYearAmountSumLxTmp,"title":"本年项目金额(万元)","width":120,"filterable":true},{"attributes":{"style":"text-align:right;"},"field":"","headerAttributes":{"style":"text-align:center"},"template":forAdjustTemplate,"title":"","width":80,"filterable":true},{"attributes":{"style":"text-align:center;"},"field":"currentMonthNewSumJd","headerAttributes":{"style":"text-align:center;"},"template":currentMonthNewSumJdTmp,"title":"本月新增","width":100,"filterable":true},{"attributes":{"style":"text-align:right;"},"field":"currentMonthAmountSumJd","headerAttributes":{"style":"text-align:center"},"template":currentMonthAmountSumJdTmp,"title":"本月项目金额(万元)","width":120,"filterable":true},{"attributes":{"style":"text-align:center;"},"field":"currentYearNewSumJd","headerAttributes":{"style":"text-align:center;"},"template":currentYearNewSumJdTmp,"title":"本年合计","width":100,"filterable":true},{"attributes":{"style":"text-align:right;"},"field":"currentYearAmountSumJd","headerAttributes":{"style":"text-align:center"},"template":currentYearAmountSumJdTmp,"title":"本年项目金额(万元)","width":120,"filterable":true}]}||{};
        options.hlsDataSource = datas;
        unitTable.dataSource = this;
        options.dataSource = this;
        options.gridSelector = "#unitTable";
        options.pageControlSelector = "#unitTable_grid_foot";
        options.nextImgEnablePath = "/resources/images/CSH/next.png";
        options.prevImgEnablePath = "/resources/images/CSH/lastCan.png";
        options.nextImgUnenablePath = "/resources/images/CSH/nextNot.png";
        options.prevImgUnenablePath = "/resources/images/CSH/last.png";
        unitTable._init(options);
    });









</script></div><div class="k-content" id="tabstrip2-2" role="tabpanel" aria-hidden="true" aria-expanded="false">
<div class="hls-pagging-grid" style="height:100%;box-shadow:none; width:100%;overflow-y:hidden; overflow-x:hidden !important;">
    <div id="unitContractTable" class="grid-body"><table><tr><td style="text-align: center;width: 120px;font-weight:bold;"><span>部门</span></td><td style="text-align: center;width: 80px;font-weight:bold;" colspan="8"><span>合同</span></td></tr><tr><td style="text-align: center; width: 120px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;"><span></span></td><td style="text-align: center; width: 120px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;"><span>本月新增</span></td><td style="text-align: center; width: 140px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;"><span>本月合同签约额(万元)</span></td><td style="text-align: center; width: 140px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;"><span>本月投放金额（万元）</span></td><td style="text-align: center; width: 80px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;"><span></span></td><td style="text-align: center; width: 120px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;"><span>本年合计</span></td><td style="text-align: center; width: 140px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;"><span>本年合同签约额(万元)</span></td><td style="text-align: center; width: 140px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;"><span>本年投放金额(万元)</span></td></tr><tr><td><div style="text-align: center; width: 120px;" class="hls-text-len-hidden">业务一部</div></td><td><div style="text-align: center; width: 120px;" class="hls-text-len-hidden">0</div></td><td><div style="text-align: right; margin-left: -20px; width: 140px;" class="hls-text-len-hidden">0.00</div></td><td><div style="text-align: right; margin-left: -20px; width: 140px;" class="hls-text-len-hidden">0.00</div></td><td><div style="text-align: right; width: 80px;" class="hls-text-len-hidden"></div></td><td><div style="text-align: center; width: 120px;" class="hls-text-len-hidden">5</div></td><td><div style="text-align: right; width: 140px;" class="hls-text-len-hidden">90,110.00</div></td><td><div style="text-align: right; width: 140px;" class="hls-text-len-hidden">1.00</div></td></tr><tr><td><div style="text-align: center; width: 120px;" class="hls-text-len-hidden">业务二部</div></td><td><div style="text-align: center; width: 120px;" class="hls-text-len-hidden">0</div></td><td><div style="text-align: right; margin-left: -20px; width: 140px;" class="hls-text-len-hidden">0.00</div></td><td><div style="text-align: right; margin-left: -20px; width: 140px;" class="hls-text-len-hidden">4,000.25</div></td><td><div style="text-align: right; width: 80px;" class="hls-text-len-hidden"></div></td><td><div style="text-align: center; width: 120px;" class="hls-text-len-hidden">135</div></td><td><div style="text-align: right; width: 140px;" class="hls-text-len-hidden">3,653,498.58</div></td><td><div style="text-align: right; width: 140px;" class="hls-text-len-hidden">216,337.61</div></td></tr><tr><td><div style="text-align: center; width: 120px;" class="hls-text-len-hidden">业务三部</div></td><td><div style="text-align: center; width: 120px;" class="hls-text-len-hidden">0</div></td><td><div style="text-align: right; margin-left: -20px; width: 140px;" class="hls-text-len-hidden">0.60</div></td><td><div style="text-align: right; margin-left: -20px; width: 140px;" class="hls-text-len-hidden">4,085.00</div></td><td><div style="text-align: right; width: 80px;" class="hls-text-len-hidden"></div></td><td><div style="text-align: center; width: 120px;" class="hls-text-len-hidden">93</div></td><td><div style="text-align: right; width: 140px;" class="hls-text-len-hidden">112,125.79</div></td><td><div style="text-align: right; width: 140px;" class="hls-text-len-hidden">19,934.43</div></td></tr><tr><td><div style="text-align: center; width: 120px;" class="hls-text-len-hidden">业务四部</div></td><td><div style="text-align: center; width: 120px;" class="hls-text-len-hidden">0</div></td><td><div style="text-align: right; margin-left: -20px; width: 140px;" class="hls-text-len-hidden">0.00</div></td><td><div style="text-align: right; margin-left: -20px; width: 140px;" class="hls-text-len-hidden">5,000.00</div></td><td><div style="text-align: right; width: 80px;" class="hls-text-len-hidden"></div></td><td><div style="text-align: center; width: 120px;" class="hls-text-len-hidden">116</div></td><td><div style="text-align: right; width: 140px;" class="hls-text-len-hidden">2,666,691.20</div></td><td><div style="text-align: right; width: 140px;" class="hls-text-len-hidden">226,681.66</div></td></tr><tr><td><div style="text-align: center; width: 120px;" class="hls-text-len-hidden">合计</div></td><td><div style="text-align: center; width: 120px;" class="hls-text-len-hidden">0</div></td><td><div style="text-align: right; margin-left: -20px; width: 140px;" class="hls-text-len-hidden">0.60</div></td><td><div style="text-align: right; margin-left: -20px; width: 140px;" class="hls-text-len-hidden">13,085.25</div></td><td><div style="text-align: right; width: 80px;" class="hls-text-len-hidden"></div></td><td><div style="text-align: center; width: 120px;" class="hls-text-len-hidden">349</div></td><td><div style="text-align: right; width: 140px;" class="hls-text-len-hidden">6,522,425.57</div></td><td><div style="text-align: right; width: 140px;" class="hls-text-len-hidden">462,954.71</div></td></tr></table></div>
</div>
<div style="clear:both;"></div>
<script>
    selectTableCol3.fetch(function (datas) {
        unitContractTable = new  HlsRollTable();
        var options =  {"pageSize":"5","id":"unitContractTable","filterable":true,"columns":[{"attributes":{"style":"text-align:center;"},"field":"unitName","headerAttributes":{"style":"text-align:center;"},"width":120,"filterable":true},{"attributes":{"style":"text-align:center;"},"field":"currentMonthNewSumHt","headerAttributes":{"style":"text-align:center"},"template":currentMonthNewSumHtTmp,"title":"本月新增","width":120,"filterable":true},{"attributes":{"style":"text-align:right;margin-left:-20px;"},"field":"currentMonthAmountSumHt","headerAttributes":{"style":"text-align:center"},"template":currentMonthAmountSumHtTmp,"title":"本月合同签约额(万元)","width":140,"filterable":true},{"attributes":{"style":"text-align:right;margin-left:-20px;"},"field":"currentMonthThrowAmountSum","headerAttributes":{"style":"text-align:center"},"template":currentMonthThrowAmountSumTmp,"title":"本月投放金额（万元）","width":140,"filterable":true},{"attributes":{"style":"text-align:right;"},"field":"","headerAttributes":{"style":"text-align:center"},"template":forAdjustTemplate,"title":"","width":80,"filterable":true},{"attributes":{"style":"text-align:center;"},"field":"currentYearNewSumHt","headerAttributes":{"style":"text-align:center"},"template":currentYearNewSumHtTmp,"title":"本年合计","width":120,"filterable":true},{"attributes":{"style":"text-align:right;"},"field":"currentYearAmountSumHt","headerAttributes":{"style":"text-align:center"},"template":currentYearAmountSumHtTmp,"title":"本年合同签约额(万元)","width":140,"filterable":true},{"attributes":{"style":"text-align:right;"},"field":"currentYearThrowAmountSum","headerAttributes":{"style":"text-align:center"},"template":currentYearThrowAmountSumTmp,"title":"本年投放金额(万元)","width":140,"filterable":true}]}||{};
        options.hlsDataSource = datas;
        unitContractTable.dataSource = this;
        options.dataSource = this;
        options.gridSelector = "#unitContractTable";
        options.pageControlSelector = "#unitContractTable_grid_foot";
        options.nextImgEnablePath = "/resources/images/CSH/next.png";
        options.prevImgEnablePath = "/resources/images/CSH/lastCan.png";
        options.nextImgUnenablePath = "/resources/images/CSH/nextNot.png";
        options.prevImgUnenablePath = "/resources/images/CSH/last.png";
        unitContractTable._init(options);
    });









</script></div>
</div></div>
<script>
$("#tabstrip2").kendoTabStrip({"animation":false,"value":"项目"});</script></div><script>


    function getRowDataByMonth(datas, month) {
        var result = null, i = 0;
        for (; i < datas.length; i++) {
            if (Number(datas[i].writeOffMonth) === month) {
                datas[i].writeOffMonth = Number(datas[i].writeOffMonth);
                result = datas[i];
                break;
            }
        }
        return result;
    }

    $(function () {
        // ====== 下面 =====
        //getConContractDueAmount('row-body-pi-day-view', _basePath);
        loadConOverDueData(_basePath);
//        taskListInit(_basePath);
        conInceptListInit(_basePath);
        // =================


    });


    function showNoticeBox() {
        var dialog = $("#popWindow").kendoWindow({
            width: 990,
            height: 485,
            modal: true,
            visible: false,
            title: '消息盒子',
            content: '/userNoticeBox.html',
            iframe: true,
            close: function () {
                top.hls_main_link();
            }
        }).data("kendoWindow");
        top.hlsWindow(dialog, '', '', '', 'center');
    }

    function initMainSize() {

    }

    var baseInfoGraphModule = function (win) {
        var gDatas = null;

        function baseInfoContractGraph() {
            getGraphDateSource();
            var datas = gDatas,
                contractSum = 0,   // 合同总数
                currentMonthAddSum = 0; // 当月新增总数
            if (datas && datas.length > 0) {
                //1.百分比图

                datas.forEach(function (item) {
                    contractSum += item.contractCount;
                    currentMonthAddSum += item.currentMonthAddCount;
                });

                // 合同总数
                $("#con-contract-total-count2").append(contractSum);

                //本月新增合同
                var width1 = (currentMonthAddSum / contractSum).toFixed(2) * 440;
                var width2 = 440 - width1;
                $('#con-percent-color-12').width(width1);
                if (Number(currentMonthAddSum) != 0) {
                    $('#con-percent-color-12 span').html(currentMonthAddSum);
                }
                $('#con-percent-color-22').width(width2);


                //2.网格和饼图
                var conNewCount = 0, conSignCount = 0, conInceptCount = 0,
                    conEndCount = 0, conCancelCount = 0, conChangeCount = 0, toConSignCount = 0;
                for (var i = 0; i < datas.length; i++) {

                    if (datas[i].contractStatus == "NEW") {
                        $("#newPercent").html(Number(datas[i].contractCount / contractSum * 100).toFixed(2) + '%');
                        conNewCount = datas[i].contractCount;
                    }
                    if (datas[i].contractStatus == "SIGN") {
                        $("#signPercent").html(Number(datas[i].contractCount / contractSum * 100).toFixed(2) + '%');
                        conSignCount = datas[i].contractCount;
                    }

                    if (datas[i].contractStatus == "TO_SIGN") {
                        $("#toSignPercent").html(Number(datas[i].contractCount / contractSum * 100).toFixed(2) + '%');
                        toConSignCount = datas[i].contractCount;
                    }


                    if (datas[i].contractStatus == "INCEPT") {
                        $("#inceptPercent").html(Number(datas[i].contractCount / contractSum * 100).toFixed(2) + '%');

                        conInceptCount = datas[i].contractCount;
                    }
                    if (datas[i].contractStatus == "PENDING") {
                        $("#changePercent").html(Number(datas[i].contractCount / contractSum * 100).toFixed(2) + '%');
                        conChangeCount = datas[i].contractCount;
                    }
                    if (datas[i].contractStatus == "TERMINATE") {
                        $("#endPercent").html(Number(datas[i].contractCount / contractSum * 100).toFixed(2) + '%');
                        conEndCount = datas[i].contractCount;
                    }
                    if (datas[i].contractStatus == "CANCEL") {
                        $("#cancelPercent").html(Number(datas[i].contractCount / contractSum * 100).toFixed(2) + '%');
                        conCancelCount = datas[i].contractCount;
                    }
                }
            } else {
                $("#con-contract-total-count2").append('0');
            }
        }

        function getGraphDateSource() {
            $.ajax({
                type: 'GET',
                url: _basePath + '/hls/cus/index/contract/chart/query',
                contentType: "application/json; charset=utf-8",
                async: false,
                success: function (datas) {
                    gDatas = datas.rows;
                }
            });
        }

        function initPie(element_v, datas) {
            var Donut = Morris.Donut({
                noDataContent: "暂无合同",
                element: element_v,
                data: datas,
                colors: ['#2EC3E8', '#00B3B3', '#14A9CC', '#A0D469', '#FFCD55', '#E75B8D', '#FA6A4D'],
                formatter: function (y) {
                    return y;
                }
            });
//            Donut.handlers = Donut.handlers || {};
//            Donut.handlers.click = Donut.handlers.click || [];
//            Donut.handlers.click.push(function (arg, arg1) {
//                if (arg1.label == "新建") {
//                    top.openTab('CON030A', '合同综合查询', _basePath + '/cont/CON030A/contract_comprehensive_query.view?contractStatus=新建、', null, null, 'Y', 'NEW');
//                }
//                else if (arg1.label == "签约") {
//                    top.openTab('CON030A', '合同综合查询', _basePath + '/cont/CON030A/contract_comprehensive_query.view?contractStatus=签约、', null, null, 'Y', 'SIGN');
//                }
//                else if (arg1.label == "取消") {
//                    top.openTab('CON030A', '合同综合查询', _basePath + '/cont/CON030A/contract_comprehensive_query.view?contractStatus=取消、', null, null, 'Y', 'CANCEL');
//                }
//                else if (arg1.label == "起租") {
//                    top.openTab('CON030A', '合同综合查询', _basePath + '/cont/CON030A/contract_comprehensive_query.view?contractStatus=起租、', null, null, 'Y', 'INCEPT');
//                }
//                else if (arg1.label == "变更") {
//                    top.openTab('CON030A', '合同综合查询', _basePath + '/cont/CON030A/contract_comprehensive_query.view?contractStatus=暂挂、', null, null, 'Y', 'PENDING');
//                }
//                else if (arg1.label == "结束") {
//                    top.openTab('CON030A', '合同综合查询', _basePath + '/cont/CON030A/contract_comprehensive_query.view?contractStatus=正常结清、', null, null, 'Y', 'TERMINATE');
//                }
//            });
        }

        return {
            baseInfoContractGraph: baseInfoContractGraph
        }
    }(window);


    <!-- ============== -->


    $(function () {
        $.when($.get('/hls/cus/index/payment/chart/query'), $.get('/hls/cus/index/receipt/chart/query')).done(function (d1, d2) {
            var paymentDatas = d1[0].rows;
            receiptDatas = d2[0].rows,
                paymentResults = [],
                receiptResults = [];

            // i 代表月份
            for (var i = 1; i <= 12; i++) {
                paymentResults.push(getRowDataByMonth(paymentDatas, i) || {
                    writeOffDueAmount: 0,
                    writeOffMonth: i
                });

                receiptResults.push(getRowDataByMonth(receiptDatas, i) || {
                    writeOffDueAmount: 0,
                    writeOffMonth: i
                });
            }

            var paymentXArrs = [], paymentYArrs = [], paymentCurrentMonthAmount = 0, paymentCurrentYearAmount = 0;
            var receiptXArrs = [], receiptYArrs = [], receiptCurrentMonthAmount = 0, receiptCurrentYearAmount = 0;

            var sysMonth = new Date().getMonth() + 1;

            paymentResults.forEach(function (item, index) {
                paymentXArrs.push(item.writeOffDueAmount);

                paymentCurrentYearAmount = plus(paymentCurrentYearAmount, item.writeOffDueAmount);
                paymentYArrs.push(index + 1 + '月');
                if (item.writeOffMonth === sysMonth) {
                    paymentCurrentMonthAmount = item.writeOffDueAmount;
                }
            });

            receiptResults.forEach(function (item, index) {
                receiptXArrs.push(item.writeOffDueAmount);
                receiptCurrentYearAmount = plus(receiptCurrentYearAmount, item.writeOffDueAmount);
                receiptYArrs.push(index + 1 + '月');
                if (item.writeOffMonth === sysMonth) {
                    receiptCurrentMonthAmount = item.writeOffDueAmount;
                }
            });

            $('#payment-span').attr("data-composite", paymentXArrs.join(','));
            $('#payment-span').text(paymentYArrs.join(','));
            $("#month-payment-amount").append(Hls.formatCurrency(paymentCurrentMonthAmount));
            $("#year-payment-amount").append(Hls.formatCurrency(paymentCurrentYearAmount));

            $('#recepipt-span').attr("data-composite", receiptXArrs.join(','));
            $('#recepipt-span').text(receiptYArrs.join(','));
            $("#year-receipt-amount").append(Hls.formatCurrency(receiptCurrentYearAmount));
            $("#month-receipt-amount").append(Hls.formatCurrency(receiptCurrentMonthAmount));
            InitiateSparklineCharts.init();

            $('#right-area1-up').click(function () {
                top.openTab('CSH250A', '放款综合查询', '/csh/CSH250A/csh_paymenrt_req_query.html', null, null, 'Y', null, 'Y');
            });

            $('#right-area2-up').click(function () {
                top.openTab('CSH330A', '收款综合查询', '/csh/CSH330A/receipt_query.html', null, null, 'Y', null, 'Y');
            });

        });
    });


    <!--   ========================================= -->
    function goToTask(taskId, uid) {
        var rec = dataSource.getByUid(uid);
        var dialog = $("#popWindow").kendoWindow({
            actions: ["Close"],
            width: 800,
            height: 510,
            title: rec.processName + '-' + rec.startUserName,
            visible: false,
            iframe: true,
            modal: true,
            close: function (e) {
                top.hls_main_link();
            }
        }).data("kendoWindow");
        hlsWindow(dialog, 'FULL', '/wfl/task_detail.html?taskId=' + taskId + '&processInstanceId=' + rec.processInstanceId);
        // window.top.openTab("PROCESS_TASK_"+taskId, rec.processName + '-' +　rec.startUserName, '/wfl/task_detail.html?taskId=' + taskId, true);
    }

    function taskList() {
        dataSource = new kendo.data.DataSource({
            transport: {
                read: {
                    url: '/wfl/query/tasks',
                    type: "POST",
                    contentType: "application/json",
                    dataType: "json",
                },
                parameterMap: function (options, type) {
                    if (type === "read") {
                        var map = {},
                            para = $.trim($("#search-fld").val());
                        map.start = 0;
                        map.size = 4;
                        if (para) {
                            map.processDefinitionNameLike = para;
                        }
                        if (options.sort && options.sort.length > 0) {
                            map.sort = options.sort[0].field;
                            map.order = options.sort[0].dir;
                        }
                        return kendo.stringify(map);
                    }
                }
            },
            batch: true,
            serverPaging: true,
            serverSorting: true,
            sort: {field: 'createTime', dir: 'desc'}, /*priority*/
            pageSize: 10,
            schema: {
                data: 'data',
                total: 'total',
                model: {
                    id: "id"
                }
            }
        });
        dataSource.fetch(function (e) {
            var datas = this.data();
            $('#task-list-id').html('');
            if (datas && datas.length > 0) {
                var html = '';
                var hour = 0;
                var day = 0;
                var week = 0;
                var month = 0;
                var year = 0;
                for (var i = 0; i < datas.length; i++) {
                    html = html + '<div class="row-second-body-item">';
                    html = html + '<div class="row-second-body-item-title">';
//                html = html + '<div class="row-second-body-item-title-common row-second-body-item-title1"><label> <input style="width: 20px;margin-top: -2px;" type="checkbox"> <span class="text"></span> </label></div>';
                    html = html + '<div class="row-second-body-item-title-common row-second-body-item-title2 row-second-body-item-title-progress" style="background-color:#00b3b3">';
                    html = html + 'TODO';
                    html = html + '</div>';
                    html = html + '<div class="row-second-body-item-title-common row-second-body-item-title3" style="width:150px;padding-left:0;color: #666666;">' + datas[i].processName + '</div>';
                    html = html + '</div>';
                    html = html + '<div style="cursor:pointer" class="row-second-body-item-body"><a style=" text-decoration:none; out-line: none; color:#444444;" href="javascript:goToTask(' + datas[i].id + ',\'' + datas[i].uid + '\');">' + datas[i].description + '</a></div>';
                    html = html + '<div class="row-second-body-item-foot">';
                    html = html + '<div class="row-second-body-item-foot-common row-second-body-item-foot-left">' + datas[i].startUserName + '</div>';
                    html = html + '<div class="row-second-body-item-foot-common row-second-body-item-foot-right" style="width:140px;color: #666666;font-weight:100;font-size:10px; padding-left:50px;">' + Hls.formatDate(datas[i].createTime) + '</div>';
                    html = html + '</div>';
                    if (i < 3) {
                        html = html + '<div style="margin-left:3px;height:1px; background-color:#e4e4e4;width:264px ;"></div>';
                    }
                    html = html + '</div>';
                }
                $('#task-list-id').html(html);
            }
        });
    }

    $(function () {
        taskList();
        $("#search-fld").on('keydown', function (e) {
            if (e.keyCode === 13) {
                // 执行查询

                taskList();
            }
        });

        $("#task-list-btn").click(function (e) {
            // 执行查询
            taskList();
        })
    });
    <!-- ========================= -->



    <!--  -----------------------  -->


    /**
     * 图表填充
     */
    function conOverdueChartInit(contextPath) {
        $.ajax({
            type: 'GET',
            url: '/hls/cus/index/csh/chart/query',
            contentType: "application/json; charset=utf-8",
            success: function (datas) {
                var currentWeekTotalAmount = 0, currentDateAmount = 0;
                if (datas && datas.rows.length > 0) {
                    var rec = datas.rows,
                        len = rec.length,
                        dateArr = [];
                    for (var i = 0; i < 7; i++) {
                        dateArr[i] = Hls.formatDate(Hls.dateAdd('d', i, new Date()));
                    }
                    var amountArr = [0, 0, 0, 0, 0, 0, 0];

                    for (var i = 0; i < len; i++) {
                        var index = dateArr.indexOf(Hls.formatDate(new Date(rec[i].chanceDate)));
                        if (index === 0) {
                            currentDateAmount = rec[i].amount;
                        }
                        if (index >= 0) {
                            currentWeekTotalAmount = plus(currentWeekTotalAmount, rec[i].amount);
                            amountArr[index] = plus(amountArr[index], rec[i].amount);
                        }
                    }
                    $('#contract-overdue-span').text(amountArr.join(','));

                }
                InitiateSparkline2Charts.init();

                // 本周总计
                $("#current-week-total").html(Hls.formatCurrency(currentWeekTotalAmount));

                // 今日应收金额
                $("#current-dueamount").html(Hls.formatCurrency(currentDateAmount));

            }
        });
    }

    function initWeekContent() {
        var sysDateStr = $('#sysData').text();
        sysDateStr = sysDateStr.replace('年', '-').replace('月', '-').replace('日', '');
        var year = sysDateStr.split('-')[0];
        var month = sysDateStr.split('-')[1];
        var date = sysDateStr.split('-')[2];
        var newDate = new Date(year, month, date);
        var dayNames = new Array("星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六");
        $('#day-1').text(dayNames[newDate.getDay()]);
        newDate.setDate(newDate.getDate() - 1);
        $('#day-2').text(dayNames[newDate.getDay()]);
        newDate.setDate(newDate.getDate() - 1);
        $('#day-3').text(dayNames[newDate.getDay()]);
        newDate.setDate(newDate.getDate() - 1);
        $('#day-4').text(dayNames[newDate.getDay()]);
        newDate.setDate(newDate.getDate() - 1);
        $('#day-5').text(dayNames[newDate.getDay()]);
        newDate.setDate(newDate.getDate() - 1);
        $('#day-6').text(dayNames[newDate.getDay()]);
        newDate.setDate(newDate.getDate() - 1);
        $('#day-7').text(dayNames[newDate.getDay()]);
    }

    function loadConOverDueData(contextPath) {
        conOverdueChartInit(contextPath);
        initWeekContent();
    }

    <!--  -----------------------  -->


    var tableCol2 = [],
        tableCol3 = [];

    $.get(_basePath + '/hls/cus/index/group/unit/table?colNum=2', function (d2) {
        tableCol2 = d2.rows || [];
        $.extend(true, selectTableCol1.dataSource, tableCol2);

        // 按中文排序
//            var sort = ['业务一部','业务二部','业务三部','业务四部'];

        var table1 = [], table2 = [],
            total1 = $.extend({}, selectTableCol1.dataSource[0]),
            total2 = $.extend({}, selectTableCol3.dataSource[0]);
        for(var property in total1){
            if(total1.hasOwnProperty(property)){
                total1[property] = 0;
            }
        }
        for(var property in total2){
            if(total2.hasOwnProperty(property)){
                total2[property] = 0;
            }
        }


        selectTableCol1.dataSource.forEach(function (item) {
            total1.currentMonthNewSumLx = plus(total1.currentMonthNewSumLx || 0,item.currentMonthNewSumLx || 0);
            total1.currentMonthAmountSumLx = plus(total1.currentMonthAmountSumLx || 0,item.currentMonthAmountSumLx || 0);
            total1.currentYearNewSumLx = plus(total1.currentYearNewSumLx || 0,item.currentYearNewSumLx || 0);
            total1.currentYearAmountSumLx = plus(total1.currentYearAmountSumLx || 0,item.currentYearAmountSumLx || 0);

            total1.currentMonthNewSumJd = plus(total1.currentMonthNewSumJd || 0,item.currentMonthNewSumJd || 0);
            total1.currentMonthAmountSumJd = plus(total1.currentMonthAmountSumJd ||0 ,item.currentMonthAmountSumJd || 0);
            total1.currentYearNewSumJd = plus(total1.currentYearNewSumJd || 0,item.currentYearNewSumJd || 0);
            total1.currentYearAmountSumJd = plus(total1.currentYearAmountSumJd || 0,item.currentYearAmountSumJd || 0);

            switch (item.unitName.trim()) {
                case '业务一部':
                    table1[0] = item;
                    break;
                case '业务二部':
                    table1[1] = item;
                    break;
                case '业务三部':
                    table1[2] = item;
                    break;
                case '业务四部':
                    table1[3] = item;
                    break;
            }
        });

        selectTableCol3.dataSource.forEach(function (item) {
            total2.currentMonthNewSumHt = plus(total2.currentMonthNewSumHt || 0,item.currentMonthNewSumHt || 0);
            total2.currentMonthAmountSumHt = plus(total2.currentMonthAmountSumHt || 0,item.currentMonthAmountSumHt || 0);
            total2.currentMonthThrowAmountSum = plus(total2.currentMonthThrowAmountSum || 0,item.currentMonthThrowAmountSum || 0);


            total2.currentYearNewSumHt = plus(total2.currentYearNewSumHt || 0,item.currentYearNewSumHt || 0);
            total2.currentYearAmountSumHt = plus(total2.currentYearAmountSumHt || 0,item.currentYearAmountSumHt || 0);
            total2.currentYearThrowAmountSum = plus(total2.currentYearThrowAmountSum || 0,item.currentYearThrowAmountSum || 0);

            switch (item.unitName.trim()) {
                case '业务一部':
                    table2[0] = item;
                    break;
                case '业务二部':
                    table2[1] = item;
                    break;
                case '业务三部':
                    table2[2] = item;
                    break;
                case '业务四部':
                    table2[3] = item;
                    break;
            }
        });

        total1.unitName = '合计';



        total2.unitName = '合计';


        table1.push(total1);
        table2.push(total2);
        selectTableCol1.successEnd(table1);
        selectTableCol3.successEnd(table2);

        $("#unitTable > table > tr").first().before('<tr><td style="text-align: center;width: 120px;font-weight:bold;"><span>部门</span></td><td style="text-align: center;width: 80px;font-weight:bold;" colspan="4"><span>项目立项</span></td><td style="text-align: center;width: 160px;font-weight:bold;" colspan="5"><span>尽调</span></td></tr>');
        $("#unitContractTable > table > tr").first().before('<tr><td style="text-align: center;width: 120px;font-weight:bold;"><span>部门</span></td><td style="text-align: center;width: 80px;font-weight:bold;" colspan="8"><span>合同</span></td>');

    });

    </script>

</body></html>